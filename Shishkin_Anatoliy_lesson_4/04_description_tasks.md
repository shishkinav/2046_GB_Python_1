# Урок 4. Работа с модулями и пакетами
## Задание 1
> Результат выполнения задания должен быть файл `task_4_1.txt` добавленный в репозиторий, в котором будут введенные Вами команды и их результат

* Проверить, установлен ли пакет `pillow` в глобальном окружении. Если да — зафиксировать версию. 
* Установить самую свежую версию `pillow`, если ранее она не была установлена.
* Создать и активировать виртуальное окружение. Убедиться, что в нем нет пакета `pillow`. 
* Установить в виртуальное окружение `pillow` версии `7.1.1` (или другой, отличной от самой свежей). 
* Деактивировать виртуальное окружение. 
* Если будут проблемы с `pillow` - можно поработать с другим пакетом: например, `requests`. 

Пример части содержимого файла `task_4_1.txt`:

```
1. установлен ли пакет requests в виртуальном окружении?

(env) avshishkin@avshishkin-HP-ProBook:~/PythonBase_11_lesson/lesson_4$ pip show requests
Name: requests
Version: 2.25.1
Summary: Python HTTP for Humans.
Home-page: https://requests.readthedocs.io
Author: Kenneth Reitz
Author-email: me@kennethreitz.org
License: Apache 2.0
Location: /home/avshishkin/VCS/GB_sudents/env/lib/python3.9/site-packages
Requires: idna, certifi, urllib3, chardet
```

## Задание 2
В корневой директории урока создать `task_4_2.py` и написать в нём функцию `currency_rates()`, 
принимающую в качестве аргумента код валюты (например, USD, EUR, SGD, ...) и 
возвращающую курс этой валюты по отношению к рублю.

Использовать библиотеку `requests`. 

В качестве API можно использовать `http://www.cbr.ru/scripts/XML_daily.asp`. 

> Рекомендация: выполнить предварительно запрос к API в обычном браузере, посмотреть содержимое ответа.

* Можно ли, используя только методы класса `str`, решить поставленную задачу?
* Функция должна возвращать результат числового типа, например `float`. 

Подумайте:
* есть ли смысл для работы с денежными величинами использовать вместо `float` тип `Decimal`?
* Сильно ли усложняется код функции при этом?

Если в качестве аргумента передали код валюты, которого нет в ответе, вернуть `None`.  

Можно ли сделать работу функции не зависящей от того, в каком регистре был передан аргумент?  
В качестве примера выведите курсы доллара и евро.

**ВНИМАНИЕ!** Используйте стартовый код для своей реализации:

```(python)
import requests


def currency_rates(code: str) -> float:
    """возвращает курс валюты `code` по отношению к рублю"""
    # ваша реализация здесь
    result_value = 1.11  ## здесь должно оказаться результирующее значение float
    return result_value


print(currency_rates("USD"))
print(currency_rates("noname"))
```

## Задание 3
*(вместо 2) В `task_4_3.py` создать функцию `currency_rates_adv()` аналогичную `currency_rates()` 
прошлого задания, только теперь она должна возвращать кроме курса ещё и дату, 
которая передаётся в ответе сервера. 

> Дата должна быть в виде объекта `date`. Т.е. функция должна возвращать кортеж из двух 
> элементов следующих типов float и datetime.date

Подумайте, как извлечь дату из ответа, какой тип данных лучше использовать в ответе функции?

**ВНИМАНИЕ!** Используйте стартовый код для своей реализации:

```(python)
import datetime

def currency_rates_adv(code: str):
    # ваша реализация здесь
    ...
    
kurs, date_value = currency_rates_adv("USD")


empty = bool(not kurs and not date_value)
if not empty and not isinstance(kurs, float):
    raise TypeError("Неверный тип данных у курса")
if not empty and not isinstance(date_value, datetime.date):
    raise TypeError("Неверный тип данных у даты")
print(kurs, date_value)
```

## Задание 4
Написать свой модуль `utils` и копировать в него функцию currency_rates() из предыдущего задания. 

Создать в корневой директории урока, рядом с модулем `utils` скрипт `task_4_4.py`, в котором импортировать модуль 
`utils` и выполнить несколько вызовов функции `utils.currency_rates()`. 

Убедиться, что ничего лишнего не происходит. 

Приложите в конце скрипта `task_4_4.py` многострочным комментарием результат его запуска с консоли/терминала.


## Задание 5
*(вместо 4) Рядом со скриптом `task_4_4.py`, создать скрипт `task_4_5.py` с содержимым аналогичным `task_4_4.py`, но 
переработанным так, чтобы новый скрипт теперь срабатывал, как `CLI`, прямо в консоли/терминале.

Например:

```
>>> python task_4_5.py USD
75.18, 2020-09-05
```


> Задачи со * предназначены для продвинутых учеников, которым мало сделать обычное задание.
